// Trading Bot BTC Database Schema
// Generated for dbdiagram.io

Table symbols {
  id integer [primary key, increment]
  symbol text [unique, not null]
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    symbol [unique]
  }
}

Table timeframes {
  id integer [primary key, increment]
  timeframe text [unique, not null]
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    timeframe [unique]
  }
}

Table ohlcv_data {
  id integer [primary key, increment]
  symbol_id integer [not null]
  timeframe_id integer [not null]
  timestamp datetime [not null]
  open real [not null]
  high real [not null]
  low real [not null]
  close real [not null]
  volume real [not null]
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    (symbol_id, timeframe_id, timestamp) [unique]
    symbol_id
    timeframe_id
    timestamp
    (symbol_id, timeframe_id, timestamp) [name: "idx_ohlcv_symbol_timeframe_timestamp"]
  }
}

Table sma_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  sma_50 real
  sma_200 real
  sma_ratio real
  price_vs_sma50 real
  price_vs_sma200 real
  trend_strength real
  sma_signal text
  cross_signal text
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table macd_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  ema_12 real
  ema_26 real
  macd_line real
  signal_line real
  histogram real
  macd_signal text
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table bollinger_bands_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  bb_upper real
  bb_lower real
  bb_middle real
  bb_width real
  bb_percent real
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table rsi_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  rsi real
  rsi_sma_5 real
  rsi_sma_10 real
  overbought boolean
  oversold boolean
  trend_strength text
  divergence_signal text
  momentum_shift boolean
  support_resistance text
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table ichimoku_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  tenkan_sen real
  kijun_sen real
  senkou_span_a real
  senkou_span_b real
  chikou_span real
  cloud_color text
  ichimoku_signal text
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table parabolic_sar_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  parabolic_sar real
  trend text
  reversal_signal boolean
  signal_strength real
  acceleration_factor real
  sar_signal text
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table fibonacci_retracement_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  level_0 real
  level_23_6 real
  level_38_2 real
  level_50_0 real
  level_61_8 real
  level_76_4 real
  level_78_6 real
  level_100 real
  nearest_fib_level real
  support_resistance text
  fib_signal text
  trend_direction text
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

Table gaussian_channel_indicator {
  id integer [primary key, increment]
  ohlcv_id integer [not null, unique]
  gc_upper real
  gc_lower real
  gc_middle real
  created_at datetime [default: `CURRENT_TIMESTAMP`]
  
  indexes {
    ohlcv_id [unique]
  }
}

// Foreign Key Relationships
Ref: ohlcv_data.symbol_id > symbols.id
Ref: ohlcv_data.timeframe_id > timeframes.id
Ref: sma_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: macd_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: bollinger_bands_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: rsi_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: ichimoku_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: parabolic_sar_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: fibonacci_retracement_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]
Ref: gaussian_channel_indicator.ohlcv_id > ohlcv_data.id [delete: cascade]

// Table Groups for better visualization
TableGroup trading_data {
  symbols
  timeframes
  ohlcv_data
}

TableGroup technical_indicators {
  sma_indicator
  macd_indicator
  bollinger_bands_indicator
  rsi_indicator
  ichimoku_indicator
  parabolic_sar_indicator
  fibonacci_retracement_indicator
  gaussian_channel_indicator
}
